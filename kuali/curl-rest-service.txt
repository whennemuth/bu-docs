# To get a dump of traffic going from kc/core to coi in the form of REST service calls:
# 'eyJhbGc' identifies the first characters of the service token (found in kc-config.xml)
# 172.17.0.3 identifies the ip address of the container running coi.
# docker0 is the network containers are on (you may also be able to use eth0)
tcpdump -XX -i docker0 dst 172.17.0.3 | grep 'eyJhbGc'

# Get all status info from coi for a specific project (project id = 23
curl -i \
-X GET \
http://localhost:8092/api/coi/project-disclosure-statuses/KC-PD/2 \
--data '{}' \
--header "Content-Type: application/json" \
--header "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjU5ZDNhZjUwNzEwODM2MDA4NzNlNWFlMiIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoxNTM4NTgxMjAwLCJpYXQiOjE1MDcwNDUyMDB9.H-Dzs9zomxA3VyqPNYVP2f3l4NX6kzM2A6dnPlSLUTk"

curl -i \
-X GET \
https://kuali-research-qa.bu.edu/api/coi/project-disclosure-statuses/KC-PD/2 \
--data '{}' \
--header "Content-Type: application/json" \
--header "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjU5ZDNhZjUwNzEwODM2MDA4NzNlNWFlMiIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoxNTM4NTgxMjAwLCJpYXQiOjE1MDcwNDUyMDB9.H-Dzs9zomxA3VyqPNYVP2f3l4NX6kzM2A6dnPlSLUTk"


[
	{
		"userId":"U15364542",
		"disposition":"None",
		"annualDisclosureStatus":"Submitted for Approval",
		"status":"Up To Date"
	},
	{
		"userId":"U21967744",
		"disposition":"None",
		"annualDisclosureStatus":"Submitted for Approval",
		"status":"Up To Date"
	}
]

# Add a new user
curl \
-X POST \
-H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjU5ZDNhZjUwNzEwODM2MDA4NzNlNWFlMiIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoxNTM4NTgxMjAwLCJpYXQiOjE1MDcwNDUyMDB9.H-Dzs9zomxA3VyqPNYVP2f3l4NX6kzM2A6dnPlSLUTk' \
-H 'Content-Type: application/json' \
-d @user.json \
http://localhost:3000/api/v1/users

# Add multiple users. You are in a directory that has multiple user#.json files (where # is an integer)
for f in user*.json ; do \
  curl \
  -X POST \
  -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViMTA1MjY2Mzg2OTk0MDM3NWJiMzhhMCIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoyNzM3Mzk2MzI2LCJpYXQiOjE1Mjc3OTYzMjZ9.V33OgmfwiHeim2DEJJzCr6lSgsOC7qUAd2YRt2Q0NAo' \
  -H 'Content-Type: application/json' \
  -d @$f \
  https://kuali-research-qa.bu.edu/api/v1/users
done


# Get disclosure info from coi for a specific user and project (user id = U21967744)
curl -i \
-X GET \
http://localhost:8092/api/coi/users/U21967744/disclosures/annual \
--data '{}' \
--header "Content-Type: application/json" \
--header "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjU5ZDNhZjUwNzEwODM2MDA4NzNlNWFlMiIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoxNTM4NTgxMjAwLCJpYXQiOjE1MDcwNDUyMDB9.H-Dzs9zomxA3VyqPNYVP2f3l4NX6kzM2A6dnPlSLUTk"

curl -i \
-X GET \
https://kuali-research-qa.bu.edu/api/coi/users/U21967744/disclosures/annual \
--data '{}' \
--header "Content-Type: application/json" \
--header "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjU5ZDNhZjUwNzEwODM2MDA4NzNlNWFlMiIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoxNTM4NTgxMjAwLCJpYXQiOjE1MDcwNDUyMDB9.H-Dzs9zomxA3VyqPNYVP2f3l4NX6kzM2A6dnPlSLUTk"



curl \
-H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVhMzgzMDU3OTU1MjMyMDA4NzRmMmUwYyIsImlzcyI6Imt1YWxpLmNvIiwiZXhwIjoxNTQ1MTY3ODMxLCJpYXQiOjE1MTM2MzE4MzF9.uy6srJZbhnmP4266wFNXwaIawGhX0bZt9Gs0N6WVlUE" \
-H "Content-Type: application/json" \
-X POST \
-d '{"displayName":"luigi-service-user"}' https://kuali-research-qa.bu.edu/api/v1/apps


curl \
-X POST \
-H "Authorization: Basic $(echo -n "wrh:password" | base64 -w 0)" \
-H "Content-Type: application/json" \
"https://kuali-research-qa.bu.edu/api/v1/auth/authenticate"

curl \
-X POST \
-H "Content-Type: application/json" \
"https://wrh:password@kuali-research-qa.bu.edu/api/v1/auth/authenticate"


curl -i \
-X GET \
https://kuali-research-qa.bu.edu/api/v1/users?sort=uid \
--header "Content-Type: application/json" \
--header "Authorization: Bearer $(curl -X POST -H "Authorization: Basic $(echo -n "wrh:password" | base64 -w 0)" -H "Content-Type: application/json" https://kuali-research-qa.bu.edu/api/v1/auth/authenticate | sed 's/token//g' | sed "s/[{}\"':]//g" | sed "s/[[:space:]]//g")"

